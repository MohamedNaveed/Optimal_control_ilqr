clear;clc;

model = model_register('cartpole');
model.name
fprintf('initial state = %d \n', model.X0);
fprintf('final state = %d \n', model.Xg);
load('cartpole_full_state_T30_feb1.mat')

T = model.horizon;
X_ode45= zeros(model.nx, T+1);
X_ode45(:,1) = model.X0;

X_ode45= zeros(model.nx, T+1);
X_ode45(:,1) = model.X0;

for i = 1:T
    X(:,i+1) = cartpole_nl_state_prop(i, X(:,i), u_nom(:,i), model,'ode45');
end

%% plotting
plot_trajectory(X, u_nom, model.horizon,0,model.name,model.dt);
